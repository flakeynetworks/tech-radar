<html>
    <head>
        <link rel="stylesheet" href="css/radar.css">
        <script src="javascript/radar.js"></script>
    </head>
    <body>
        <div id="radars"></div>
        <script>

            radars = [];

            function addRadar(container, url) {

                console.log("Loading data from " + url);

                let radar;

                const xhttp = new XMLHttpRequest();
                xhttp.onload = function() {

                    let data = JSON.parse(this.responseText);
                    radar = Radar.build(data, container);
                    radars.push(radar);
                }

                xhttp.open("GET", url, true);
                xhttp.send();
            }

            // Get the data to load in
            const urls = ["api/simple_data.json", "api/data.json", "api/one_sector_data.json"];
            let radarsContainer = document.getElementById("radars");

            let ratio = 99 / urls.length;

            for(let url in urls) {

                let radarContainer = document.createElement("div");
                radarContainer.style.setProperty("height", ratio + "vh");
                radarContainer.style.setProperty("width", ratio + "vw");
                radarContainer.style.setProperty("display", "inline");

                radarsContainer.appendChild(radarContainer);

                addRadar(radarContainer, urls[url]);
            }
        </script>
    </body>
</html>